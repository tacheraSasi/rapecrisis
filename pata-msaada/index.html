<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Pata msaada | TUWK</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="../assets/img/icon.png" rel="icon">
  <link href="../assets/img/icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Nunito:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="../assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="../assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="../assets/css/main.css" rel="stylesheet">
  <link href="../assets/css/style.css" rel="stylesheet">

  <!-- CSS Styles -->
<style>
  
</style>


</head> 

<body class="service-details-page">
  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center">
  
      <a href="index.html" class="logo d-flex align-items-center me-auto">
        <!-- <img src="assets/img/logo.png" alt="TUWK (Tokomeza Ukatili Wa Kijinsia) Tanzania Logo"> -->
        <h1 class="sitename">TUWK</h1>
        <span class="text-small">(Tokomeza Ukatili Wa Kijinsia)</span>
      </a>
  
      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="../" class="active">Nyumbani</a></li>
          <li><a href="../#about">Kuhusu Sisi</a></li>
          <li><a href="index.html#volunteer">Mchango</a></li>
          <li><a href="index.html#donate">Toa Msaada</a></li>
          <li class="dropdown">
            <a href="#"><span>Pata Msaada</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="#">Huduma za Dharura</a></li>
              <li><a href="#">Usaidizi wa Kisaikolojia</a></li>
              <li><a href="#">Usaidizi wa Kisheria</a></li>
              <li><a href="#">Makazi Salama</a></li>
            </ul>
          </li>
          <li><a href="index.html#contact">Wasiliana Nasi</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>
  
      <a class="btn-getstarted" 
        href="" 
        data-bs-toggle="modal" 
        data-bs-target="#modalDialogScrollable">
        <i class="bi bi-person-lines-fill"> </i>
         Mshauri
      </a>
  
    </div>
  </header>
     
  <main class="main">

    <!--  Details Section -->
    <section id="service-details" class="service-details section">

      <div class="container">

        <div class="row gy-5">

          <div class="col-lg-4" data-aos="fade-up" data-aos-delay="100">

            <div class="service-box pata-msaada-container">
                <h1>Taarifa muhimu</h1>
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                <form id="questionnaire" method="post">
                  <div class="question active" id="question1-container">
                      <label>1. Je, tukio lilitokea kwako au kwa mtu unayemjua?</label>
                      <label id="label-qn"><input type="radio" name="question1" value="Mimi" required> Mimi</label>
                      <label id="label-qn"><input type="radio" name="question1" value="Mtu ninayemjua" required> Mtu ninayemjua</label>
                      <div class="validation-message" id="validation-message-1">Tafadhali jibu swali hili.</div>
                  </div>
                  
                  <div class="question" id="question2-container">
                      <label>2. Tukio lilitokea lini?</label>
                      <input type="date" id="question2" name="question2" required>
                      <div class="validation-message" id="validation-message-2">Tafadhali jibu swali hili.</div>
                  </div>
                  
                  <div class="question" id="question3-container">
                      <label>3. Je, unahitaji ushauri wa kisaikolojia?</label>
                      <label id="label-qn"><input type="radio" name="question3" value="Ndiyo" required> Ndiyo</label>
                      <label id="label-qn"><input type="radio" name="question3" value="Hapana" required> Hapana</label>
                      <div class="validation-message" id="validation-message-3">Tafadhali jibu swali hili.</div>
                  </div>
              
                  <div class="question" id="question4-container">
                      <label>4. Je, tukio liliripotiwa kwa mamlaka?</label>
                      <label id="label-qn"><input type="radio" name="question4" value="Ndiyo" required> Ndiyo</label>
                      <label id="label-qn"><input type="radio" name="question4" value="Hapana" required> Hapana</label>
                      <div class="validation-message" id="validation-message-4">Tafadhali jibu swali hili.</div>
                  </div> 
                  
                  <div class="question" id="question5-container">
                      <label>5. Je, unajua mshukiwa?</label>
                      <label id="label-qn"><input type="radio" name="question5" value="Ndiyo" required> Ndiyo</label>
                      <label id="label-qn"><input type="radio" name="question5" value="Hapana" required> Hapana</label>
                      <div class="validation-message" id="validation-message-5">Tafadhali jibu swali hili.</div>
                  </div>
                  
                  <div class="question" id="question6-container">
                      <label>6. Mawasiliano Yako?</label>
                      <input class="input-taarifa" id="jina" name="jina" required type="text" placeholder="Jina Lako">
                      <input class="input-taarifa" id="namba" name="namba" required type="tel" placeholder="namba ya simu">
                      <input class="input-taarifa" id="email" name="email" required type="email" placeholder="email">
                      <button class="maliza" id="maliza-tuwk" type="submit">Maliza</button>
                  </div>
                  <!-- Hidden fields for location -->
                  <input type="hidden" id="latitude" name="latitude">
                  <input type="hidden" id="longitude" name="longitude">
                </form>
              
                <div id="results" class="hidden">
                    <h2>Taarifa zako</h2>
                    <ul id="resultsList"></ul>
                    <div class="loader-msaada "></div> 
                </div>
                <div class="action">
                  <h2>Chukua Hatua</h2>
                  <button class="action-btn">
                    <i class="bi bi-h-square"></i>
                    Hospitali
                  </button>
                  <button class="action-btn">
                    <i class="bi bi-shield-shaded"></i>
                    Polisi
                  </button>
                  <button class="action-btn">
                    <i class="bi bi-person-lines-fill"></i>
                    Therapy
                  </button>
                  <button class="action-btn">
                    <i class="bi bi-person-rolodex"></i>
                    Pata Ushauri
                  </button>
                </div>
            </div><!-- End  List -->

            <div class="help-box d-flex flex-column justify-content-center align-items-center">
                <i class="bi bi-headset help-icon"></i>
                <h4>Una Swali?</h4>
                <p class="d-flex align-items-center mt-2 mb-0"><i class="bi bi-telephone me-2"></i> <span>+255 123 456 789</span></p>
                <p class="d-flex align-items-center mt-1 mb-0"><i class="bi bi-envelope me-2"></i> <a href="mailto:msaada@rapecrisis.org">msaada@rapecrisis.org</a></p>
            </div>
            

          </div>

          <div class="col-lg-8 ps-lg-5" data-aos="fade-up" data-aos-delay="200">
            <img src="../assets/img/services.jpg" alt="" class="img-fluid services-img">
            <h3>Uchunguzi wa Waathirika wa Ukatili wa Kijinsia</h3>
            <p>
                Tunatoa msaada wa haraka na wa muda mrefu kwa waathirika wa ukatili wa kijinsia. Tuna timu ya wataalamu walio tayari kukusaidia wakati wowote.
            </p>
            <ul>
                <li><i class="bi bi-check-circle"></i> <span>Msaada wa kisaikolojia na ushauri nasaha.</span></li>
                <li><i class="bi bi-check-circle"></i> <span>Kusaidia waathirika kuripoti matukio kwa mamlaka husika.</span></li>
                <li><i class="bi bi-check-circle"></i> <span>Kutoa maelezo ya kisheria na mwongozo wa hatua zinazofuata.</span></li>
            </ul>
            <p>
                Timu yetu inaelewa umuhimu wa faragha na usiri. Tupo hapa kuhakikisha kuwa unapokea msaada unaohitaji kwa wakati unaofaa na kwa njia salama.
            </p>
            <p>
                Usisite kuwasiliana nasi wakati wowote. Tupo hapa kwa ajili yako, kukusaidia kupitia nyakati hizi ngumu na kukupa msaada unaohitaji ili kuanza mchakato wa kupona.
            </p>
        </div>
        

        </div>

      </div>
      
      <div class="modal fade" id="modalDialogScrollable" tabindex="-1" style="z-index: 9999999999;">
        <div class="modal-dialog modal-dialog-scrollable">
          <div class="modal-content card">
            <div class="modal-header">
              <h5 class="modal-title">
                <i class="bi bi-person-lines-fill"></i> Pata Ushauri
              </h5>
              <button type="button" class="btn text-warning" data-bs-dismiss="modal" aria-label="Close">X</button>
            </div>
            <div class="modal-body" id="ekilie-ai-body">
              <div id="chat_container">
                <div class="ekilie-chat ai">
                  <div class="role assistant">
                    <span> Magreth</span>
                  </div>
                  <span> Mambo, mimi ni magreth, Uko sawa? 🙃🙃 </span>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <form method="post" class="typing-area" id="talk-to-assistant">
                <input type="text" name="prompt" class="input-field" placeholder="Niambie kilichokukumba" autocomplete="off">
                <button type="submit" id="send-btn">
                  <i class="bi bi-send" id="i-send"></i>
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
<script>
//ai therapist
const form = document.getElementById("talk-to-assistant");
const input = document.querySelector(".input-field")
const sendBtn = document.getElementById("send-btn");
const itagSend = document.getElementById("i-send");
const chatContainer = document.querySelector('#chat_container');
const modalBody = document.querySelector('#ekilie-ai-body')
const BASE_API_URL = 'https://ekilie.onrender.com'
console.log(form)

form.onsubmit = (e)=>{
    e.preventDefault();

}


let loadInterval

function loader(element) {
    element.innerHTML = '<div class="loader"></div>'

    
}
function typeText(element, text) {
    let index = 0

    let interval = setInterval(() => {
        if (index < text.length) {
            element.innerHTML += text.charAt(index)
            index++
        } else {
            clearInterval(interval)
        }
    }, 20)
}

function generateUniqueId() {
    const timestamp = Date.now();
    const randomNumber = Math.random();
    const hexadecimalString = randomNumber.toString(16);

    return `id-${timestamp}-${hexadecimalString}`;
}


function chatStripe(isAi, value, uniqueId) {
    return (
        `
        <div class="ekilie-chat ${isAi ? 'ai' : ''}">
          <div class="role ${isAi ? 'assistant' : 'user'}">${isAi ? 'Magreth' : 'me'}</div>
          <span id=${uniqueId}>${value}</span>
        </div>
    `
    )
}

const handleSubmit = async (e) => {
    e.preventDefault();
    let prompt = input.value;
    input.value = '';

    // User's chat stripe
    chatContainer.innerHTML += chatStripe(false, prompt);

    // Bot's chat stripe
    const uniqueId = generateUniqueId();
    chatContainer.innerHTML += chatStripe(true, " ", uniqueId);

    modalBody.scrollTop = modalBody.scrollHeight;

    // Specific message div
    const messageDiv = document.getElementById(uniqueId);
    loader(messageDiv);

    try {
        const response = await fetch('../chat.php', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ prompt: prompt }),
        });

        clearInterval(loadInterval);
        messageDiv.innerHTML = " ";

        if (response.ok) {
            const data = await response.json();
            const parsedData = data.text.trim(); // Trim any trailing spaces/newlines
            typeText(messageDiv, parsedData);
        } else {
            messageDiv.innerHTML = "Kunashida imetokea jaribu tena baadae  😿 😿";
        }
    } catch (error) {
        console.error("Error:", error);
        messageDiv.innerHTML = "Kunashida imetokea jaribu tena baadae  😿 😿";
    }
};

// sendBtn.addEventListener('click',()=>{
//     handleSubmit()
// })

// input.onkeyup = ()=>{
//     if(input.value != ""){
//         sendBtn.classList.add("active");
//         itagSend.classList.add("active");
//     }else{
//         sendBtn.classList.remove("active");
//         itagSend.classList.remove("active");
//     }
// }

form.addEventListener('submit', handleSubmit)
input.addEventListener('keyup', (e) => {
    if(input.value != ""){
        sendBtn.classList.add("active");
        itagSend.classList.add("active");
    }else{
        sendBtn.classList.remove("active");
        itagSend.classList.remove("active");
    }
    
})
</script>



    </section>

  </main>

  

  <a href="#" 
    style="display: block;" 
    id="scroll-top" 
    class="scroll-top d-flex align-items-center justify-content-center"
    data-bs-toggle="modal" data-bs-target="#modalDialogScrollable"
    >
    <i class="bi bi-person-lines-fill"></i>
  </a>


  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/vendor/php-email-form/validate.js"></script>
  <script src="../assets/vendor/aos/aos.js"></script>
  <script src="../assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="../assets/vendor/swiper/swiper-bundle.min.js"></script>

  <!-- Main JS File -->
  <script src="../assets/js/main.js"></script>
  <!-- <script src="../assets/js/script.js"></script> -->
  <script src="../assets/js/msaada.js"></script>

</body>

</html>